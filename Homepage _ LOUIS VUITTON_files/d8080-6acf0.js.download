(window.LVWebpackJsonp=window.LVWebpackJsonp||[]).push([[248],{1132:function(e,t,r){var content=r(1297);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("5a518ba6",content,!0,{sourceMap:!1})},1296:function(e,t,r){"use strict";r(1132)},1297:function(e,t,r){var n=r(8)((function(i){return i[1]}));n.push([e.i,"@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}@keyframes spinner{0%{stroke-dashoffset:132;transform:rotate(-90deg)}50%{stroke-dashoffset:28;transform:rotate(270deg)}to{stroke-dashoffset:132;transform:rotate(630deg)}}[dir] .lv-newsletter-form__form .lv-form-container__fields{background-color:#fff}[dir] .lv-newsletter-form__form .lv-form-container__action-button{margin-top:1.5rem}.lv-newsletter-form__form #mobileNo-field{display:none;visibility:hidden}.lv-newsletter-form__mandatory-fields{display:block}[dir] .lv-newsletter-form__mandatory-fields{margin-bottom:1rem;margin-top:1.5rem}[dir=ltr] .lv-newsletter-form__mandatory-fields{text-align:right}[dir=rtl] .lv-newsletter-form__mandatory-fields{text-align:left}[dir] .lv-newsletter-form__success-block{background-color:#fff}[dir] .lv-newsletter-form__success-block-text{margin-bottom:2.5rem}.lv-newsletter-form__success-block-buttons{flex-wrap:wrap;justify-content:flex-end}[dir] .lv-newsletter-form__success-block-buttons{padding:2.5rem 0}.lv-newsletter-form__success-block-buttons .lv-button{width:100%}@media screen and (min-width:48rem){.lv-newsletter-form__success-block-buttons{display:flex}.lv-newsletter-form__success-block-buttons .lv-button{width:auto}[dir=ltr] .lv-newsletter-form__success-block-buttons .lv-button:nth-child(2){margin-left:1rem}[dir=rtl] .lv-newsletter-form__success-block-buttons .lv-button:nth-child(2){margin-right:1rem}}[dir] .lv-newsletter-form.-is-mylv .lv-newsletter-form__form .lv-form-container__fields{padding:1.5rem 2rem}[dir] .lv-newsletter-form.-is-mylv .lv-newsletter-form__success-block{padding:3rem}",""]),n.locals={},e.exports=n},1298:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(1);function n(){let{source:source="",type:e="",locale:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(1299)("./".concat(source,"/").concat(e,"/").concat(t,".json"))}},1299:function(e,t,r){var map={"./atg/subscribe/ara-ae.json":[1736,545],"./atg/subscribe/ara-kw.json":[1737,546],"./atg/subscribe/ara-qa.json":[1738,547],"./atg/subscribe/ara-sa.json":[1739,548],"./atg/subscribe/deu-de.json":[1740,549],"./atg/subscribe/eng-ae.json":[1741,550],"./atg/subscribe/eng-at.json":[1742,551],"./atg/subscribe/eng-au.json":[1743,552],"./atg/subscribe/eng-be.json":[1744,553],"./atg/subscribe/eng-ca.json":[1745,554],"./atg/subscribe/eng-dk.json":[1746,555],"./atg/subscribe/eng-e1.json":[1747,556],"./atg/subscribe/eng-fi.json":[1748,557],"./atg/subscribe/eng-gb.json":[1749,558],"./atg/subscribe/eng-hk.json":[1750,559],"./atg/subscribe/eng-id.json":[1751,560],"./atg/subscribe/eng-ie.json":[1752,561],"./atg/subscribe/eng-in.json":[1753,562],"./atg/subscribe/eng-kw.json":[1754,563],"./atg/subscribe/eng-lu.json":[1755,564],"./atg/subscribe/eng-mc.json":[1756,565],"./atg/subscribe/eng-my.json":[1757,566],"./atg/subscribe/eng-nl.json":[1758,567],"./atg/subscribe/eng-nz.json":[1759,568],"./atg/subscribe/eng-qa.json":[1760,569],"./atg/subscribe/eng-sa.json":[1761,570],"./atg/subscribe/eng-se.json":[1762,571],"./atg/subscribe/eng-sg.json":[1763,572],"./atg/subscribe/eng-us.json":[1764,573],"./atg/subscribe/esp-es.json":[1765,574],"./atg/subscribe/esp-mx.json":[1766,575],"./atg/subscribe/fra-ca.json":[1767,576],"./atg/subscribe/fra-fr.json":[1768,577],"./atg/subscribe/ind-id.json":[1769,578],"./atg/subscribe/ita-it.json":[1770,579],"./atg/subscribe/jpn-jp.json":[1771,580],"./atg/subscribe/kor-kr.json":[1772,581],"./atg/subscribe/por-br.json":[1773,582],"./atg/subscribe/rus-ru.json":[1774,583],"./atg/subscribe/tha-th.json":[1775,584],"./atg/subscribe/vie-vn.json":[1776,585],"./atg/subscribe/zhs-cn.json":[1777,586],"./atg/subscribe/zht-hk.json":[1778,587],"./atg/subscribe/zht-tw.json":[1779,588],"./atg/unsubscribe/eng-us.json":[1780,589],"./sfcc/subscribe/ara-ae.json":[1781,590],"./sfcc/subscribe/ara-kw.json":[1782,591],"./sfcc/subscribe/ara-qa.json":[1783,592],"./sfcc/subscribe/ara-sa.json":[1784,593],"./sfcc/subscribe/deu-de.json":[1785,594],"./sfcc/subscribe/eng-ae.json":[1786,595],"./sfcc/subscribe/eng-at.json":[1787,596],"./sfcc/subscribe/eng-au.json":[1788,597],"./sfcc/subscribe/eng-be.json":[1789,598],"./sfcc/subscribe/eng-ca.json":[1790,599],"./sfcc/subscribe/eng-dk.json":[1791,600],"./sfcc/subscribe/eng-e1.json":[1792,601],"./sfcc/subscribe/eng-fi.json":[1793,602],"./sfcc/subscribe/eng-gb.json":[1794,603],"./sfcc/subscribe/eng-hk.json":[1795,604],"./sfcc/subscribe/eng-id.json":[1796,605],"./sfcc/subscribe/eng-ie.json":[1797,606],"./sfcc/subscribe/eng-in.json":[1798,607],"./sfcc/subscribe/eng-kw.json":[1799,608],"./sfcc/subscribe/eng-lu.json":[1800,609],"./sfcc/subscribe/eng-mc.json":[1801,610],"./sfcc/subscribe/eng-my.json":[1802,611],"./sfcc/subscribe/eng-nl.json":[1803,612],"./sfcc/subscribe/eng-nz.json":[1804,613],"./sfcc/subscribe/eng-qa.json":[1805,614],"./sfcc/subscribe/eng-sa.json":[1806,615],"./sfcc/subscribe/eng-se.json":[1807,616],"./sfcc/subscribe/eng-sg.json":[1808,617],"./sfcc/subscribe/eng-us.json":[1809,618],"./sfcc/subscribe/esp-es.json":[1810,619],"./sfcc/subscribe/esp-mx.json":[1811,620],"./sfcc/subscribe/fra-ca.json":[1812,621],"./sfcc/subscribe/fra-fr.json":[1813,622],"./sfcc/subscribe/ind-id.json":[1814,623],"./sfcc/subscribe/ita-it.json":[1815,624],"./sfcc/subscribe/jpn-jp.json":[1816,625],"./sfcc/subscribe/kor-kr.json":[1817,626],"./sfcc/subscribe/por-br.json":[1818,627],"./sfcc/subscribe/rus-ru.json":[1819,628],"./sfcc/subscribe/tha-th.json":[1820,629],"./sfcc/subscribe/vie-vn.json":[1821,630],"./sfcc/subscribe/zhs-cn.json":[1822,631],"./sfcc/subscribe/zht-hk.json":[1823,632],"./sfcc/subscribe/zht-tw.json":[1824,633],"./sfcc/unsubscribe/eng-us.json":[1825,634]};function n(e){if(!r.o(map,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=map[e],n=t[0];return r.e(t[1]).then((function(){return r.t(n,3)}))}n.keys=function(){return Object.keys(map)},n.id=1299,e.exports=n},1425:function(e,t,r){"use strict";r(1);var n=r(2),o=r(6),c=r(122),l=r(278),d=r(16),f={components:{FormContainer:l.default,SmartLink:d.default,LegalNoticeSection:()=>r.e(7).then(r.bind(null,1929))},props:{schema:{type:Object,default:()=>({})},type:{type:String,default:"subscribe"},context:{type:String,default:"footer"}},data:()=>({isPending:!1,clientData:[],isSubscribeSuccessful:!1,isUnsubscribeSuccessful:!1,serviceErrors:{},errorMessage:null,registrationUrl:"",informations:{categoryGa:"form_newsletter",actionPosition:"bottom_page"}}),computed:{hasForm(){return!this.isSubscribeSuccessful&&!this.isUnsubscribeSuccessful},isMyLVContext(){return"mylv"===this.context},isFooterContext(){return"footer"===this.context},homepageUrl(){return this.$store.getters[n.GET_SEO_URL]("home")},isTwist(){return this.$store.getters[o.LOCALE_CONTEXT_IS_TWIST]},formattedClientName(){return this.clientData.length>0?"".concat(this.clientData[0].firstName," ").concat(this.clientData[0].lastName):""}},mounted(){this.isTwist||(this.registrationUrl=this.$store.getters[n.GET_SEO_URL]("mylv-registration"))},methods:{async handleNewsletterSubmission(){this.resetSubmissionFlags(),this.isPending=!0;const e=this.$refs.newsletterForm.model;if("subscribe"===this.type)if(this.sendEventTracking({actionGa:"subscribe_intention",actionId:"subscribe_intention",...this.informations}),e.email===e.emailConfirmation)try{if(Object.assign(e,{status:"active"}),await this.$domain.account.guestNewsletterSubscription(e),this.sendEventTracking({actionGa:"subscription_success",actionId:"newsletter_subscription_succeeded",categoryGa:this.informations.categoryGa}),this.clientData.push(e),this.isPending=!1,this.isSubscribeSuccessful=!0,this.$emit("update:isSubscribeSuccessful",this.isSubscribeSuccessful),this.isTwist&&!this.isFooterContext){const e="".concat(window.location.origin).concat(this.$route.fullPath);this.registrationUrl=await this.$domain.account.getAccountCreationUrl({redirectUrl:e,errorPageUrl:this.mylvErrorPageUrl})}this.isFooterContext?setTimeout((()=>{this.isSubscribeSuccessful&&this.$emit("close-modal")}),3e3):window.scrollTo(0,0)}catch(e){this.handleErrors(e),this.sendEventTracking({actionGa:"subscription_failure",actionId:"newsletter_subscription_failed",categoryGa:this.informations.categoryGa})}else this.handleErrors({emailConfirmation:this.$t("lib_error_email_confirmation")},!0),this.sendEventTracking({actionGa:"subscription_failure",actionId:"newsletter_subscription_failed",categoryGa:this.informations.categoryGa});if("unsubscribe"===this.type)try{await this.$domain.account.guestNewsletterUnsubscription(e.emailUnsubscribe),this.sendEventTracking({actionGa:"unsubscribe",actionId:"unsubscribe",...this.informations}),this.isPending=!1,this.isUnsubscribeSuccessful=!0,this.$emit("update:isUnsubscribeSuccessful",this.isUnsubscribeSuccessful)}catch(e){this.handleErrors(e),this.sendEventTracking({actionGa:"unsubscription_failure",actionId:"newsletter_unsubscription_failed",categoryGa:this.informations.categoryGa})}},resetSubmissionFlags(){this.isUnsubscribeSuccessful=!1,this.isSubscribeSuccessful=!1},handleErrors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.serviceErrors=t?e:Object(c.f)(e.serviceErrors),this.errorMessage=this.$t("global_error_message")||e.message,this.isPending=!1},sendEventTracking(e){this.$lvTrackingSendEvent(this.$lvTrackingGenerateData(e))},trackingAccountCreation(){return this.$lvTrackingGenerateData({categoryGa:"form_newsletter",actionGa:"create_my_account"})},trackingBackToHome(){return this.$lvTrackingGenerateData({categoryGa:"form_newsletter",actionGa:"back_to_home"})}}},m=f,_=(r(1296),r(0)),component=Object(_.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"lv-newsletter-form",class:{"-is-mylv":e.isMyLVContext}},[e.hasForm?t("section",[e.isFooterContext?t("p",[e._v(e._s(e.$t("mylv_newsletter_registration_title")))]):e._e(),e._v(" "),t("FormContainer",{ref:"newsletterForm",staticClass:"lv-newsletter-form__form",attrs:{id:"newsletter-form","form-schema":e.schema,"service-errors":e.serviceErrors,"error-message":e.errorMessage,"is-pending":e.isPending},on:{submit:e.handleNewsletterSubmission},scopedSlots:e._u([e.isFooterContext?{key:"field-content-after-suscribedInNewsletter",fn:function(){return[t("span",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.$t("global_mandatory_fields"),expression:"$t('global_mandatory_fields')"}],staticClass:"lv-newsletter-form__mandatory-fields body-s"})]},proxy:!0}:null],null,!0)})],1):e._e(),e._v(" "),e.isSubscribeSuccessful?t("section",[t("div",{staticClass:"lv-newsletter-form__success-block"},[t("div",{staticClass:"lv-newsletter-form__success-block-text body-l"},[t("p",[e._v("\n          "+e._s(e.formattedClientName)+" "),t("br"),e._v("\n          "+e._s(e.$t("mylv_newsletter_registration_confirmation"))+"\n        ")]),e._v(" "),t("p",[e._v(e._s(e.$t("global_thanksmessage")))])]),e._v(" "),e.isMyLVContext?t("span",{staticClass:"body-s"},[e._v(e._s(e.$t("mylv_newsletter_subscription_success_message_desc")))]):e._e()]),e._v(" "),e.isMyLVContext?t("div",{staticClass:"lv-newsletter-form__success-block-buttons"},[t("SmartLink",{directives:[{name:"tracking",rawName:"v-tracking",value:e.trackingBackToHome(),expression:"trackingBackToHome()"}],staticClass:"lv-newsletter-form__button-back-home lv-button -secondary",attrs:{url:e.homepageUrl}},[e._v("\n        "+e._s(e.$t("global_go_to_homepage"))+"\n      ")]),e._v(" "),t("SmartLink",{directives:[{name:"tracking",rawName:"v-tracking",value:e.trackingAccountCreation(),expression:"trackingAccountCreation()"}],staticClass:"lv-newsletter-form__button-registration lv-button -primary",attrs:{url:e.registrationUrl}},[e._v("\n        "+e._s(e.$t("global_create_mylv_account"))+"\n      ")])],1):e._e()]):e._e(),e._v(" "),e.isUnsubscribeSuccessful?t("section",[t("p",[e._v(e._s(e.$t("mylv_newsletter_unsubscription_confirmation")))]),e._v(" "),t("SmartLink",{directives:[{name:"tracking",rawName:"v-tracking",value:e.trackingBackToHome(),expression:"trackingBackToHome()"}],staticClass:"lv-newsletter-form__button-back-home lv-button -primary",attrs:{url:e.homepageUrl}},[e._v("\n      "+e._s(e.$t("global_go_to_homepage"))+"\n    ")])],1):e._e(),e._v(" "),t("LegalNoticeSection")],1)}),[],!1,null,null,null);t.a=component.exports},1874:function(e,t,r){var content=r(2917);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(9).default)("154f1398",content,!0,{sourceMap:!1})},2916:function(e,t,r){"use strict";r(1874)},2917:function(e,t,r){var n=r(8)((function(i){return i[1]}));n.push([e.i,"@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}@keyframes spinner{0%{stroke-dashoffset:132;transform:rotate(-90deg)}50%{stroke-dashoffset:28;transform:rotate(270deg)}to{stroke-dashoffset:132;transform:rotate(630deg)}}[dir=ltr] .lv-newsletter-side-panel.lv-modal.-sidepanel .lv-modal__title{padding-left:6.4vw}[dir=rtl] .lv-newsletter-side-panel.lv-modal.-sidepanel .lv-modal__title{padding-right:6.4vw}[dir] .lv-newsletter-side-panel.lv-modal.-sidepanel .lv-modal__content{padding-left:6.4vw;padding-right:6.4vw}",""]),n.locals={},e.exports=n},3503:function(e,t,r){"use strict";r.r(t);r(1);var n=r(25),o=r(1298),c=r(34),l=r(1425),d={components:{Modal:c.default,NewsletterForm:l.a,KisaContainer:()=>r.e(24).then(r.bind(null,3433))},props:{modalId:{type:String,default:"newslettersubscription"}},data:()=>({modalTrigger:null,isModalOpen:!1,schemaSubscribe:{},isKisaConfirmed:!1,kisaErrorMessage:null,isPending:!1}),computed:{isUserLogged(){return this.$store.state.userContext.userIsLogged},currentPage(){return this.$store.state.pageContext.currentPage},currentType(){return this.$store.state.pageContext.utagData.pageType},hasKisaPreferences(){return this.$store.getters[n.USER_CONTEXT_HAS_KISA_PREFERENCES]}},async mounted(){this.userIsLogged||(this.registerModal(),await this.loadNewsletterSchema())},destroyed(){this.$lvModalUnregister({modalId:this.modalId})},methods:{async loadNewsletterSchema(){try{const{locale:e,isTwist:t}=this.$store.state.localeContext,source=t?"sfcc":"atg",r=await Object(o.a)({source:source,type:"subscribe",locale:e});this.schemaSubscribe=r.default}catch(e){this.$logger.error("Newsletter Side Panel - Loading form schemas",e)}},registerModal(){this.$lvModalRegister({modalId:this.modalId,links:[this.modalId],callback:this.handleModal})},handleModal(e,t){this.isUserLogged?this.$router.push(this.localePath("mylv-profile")):(this.modalTrigger=e,this.$emit("modal-triggered",t),this.isModalOpen=!0,this.$lvTrackingSendEvent(this.$lvTrackingGenerateData({pageName:this.currentPage,pageType:this.currentType,categoryGa:"form_newsletter",actionGa:"popin_newsletter_form",actionId:"popin_newsletter_form",position:"popin_newsletter",actionType:"popin"})))},closeModal(){this.$emit("close-modal"),this.isModalOpen=!1},async submitKisa(data){this.isPending=!0;const e=Object.entries(data).reduce(((form,e,t)=>(form["consent".concat(t+1)]=e.find(((e,i)=>1===i)),form)),{});try{await this.$publicAtg.account.updateKisa(e),this.isKisaConfirmed=!0}catch({error:e}){this.kisaErrorMessage=e||this.$t("global_error_message")}this.isPending=!1}}},f=(r(2916),r(0)),component=Object(f.a)(d,(function(){var e=this,t=e._self._c;return e.isModalOpen?t("Modal",{attrs:{"trigger-element":e.modalTrigger,type:e.$modalTypes.SIDE_PANEL,"modal-class":"lv-newsletter-side-panel"},on:{closed:e.closeModal},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$t("footer_newsletter")))]},proxy:!0},{key:"default",fn:function(){return[e.hasKisaPreferences&&!e.isKisaConfirmed?t("KisaContainer",{attrs:{"is-pending":e.isPending,"error-message":e.kisaErrorMessage},on:{submit:e.submitKisa,cancel:e.closeModal}}):t("NewsletterForm",{attrs:{schema:e.schemaSubscribe},on:{"close-modal":e.closeModal}})]},proxy:!0}],null,!1,1676106669)}):e._e()}),[],!1,null,null,null);t.default=component.exports}}]);