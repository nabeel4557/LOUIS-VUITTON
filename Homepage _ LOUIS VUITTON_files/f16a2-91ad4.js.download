(window.LVWebpackJsonp=window.LVWebpackJsonp||[]).push([[2,337],{1082:function(t,e,o){"use strict";o.r(e);o(1);var d=o(13),r=o.n(d),l=o(72),n=o(73),c=o(70),h=o(60),v=o(125),f=o(2),m={components:{ProductCard:c.default,Loader:h.default,ProductPurchase:()=>o.e(235).then(o.bind(null,1077)),Modal:()=>Promise.resolve().then(o.bind(null,34)),SizeSelector:()=>o.e(343).then(o.bind(null,3501)),ProductPersonalizationButton:()=>o.e(236).then(o.bind(null,1230))},props:{sku:{type:Object,required:!0},product:{type:Object,default:()=>{}},isQubit:{type:Boolean,default:!1},addToCartTracking:{type:Object,default:null},emitSizeGuideEvent:{type:Boolean,default:!1},addToCartModalStandalone:{type:Boolean,default:!1},modalLayout:{type:String,default:"pdp"},wishlistMode:{type:Boolean}},data:()=>({isLoading:!1,productData:null,selectedSku:null,currentSku:null,skuAvailabilityLoading:!1}),computed:{isPdpLayout(){return"pdp"===this.modalLayout},productComputed(){var t;if(!this.productData||r()(this.productData))return{};const e=null===(t=this.selectedSku)||void 0===t?void 0:t.skuId;return{...this.productData,defaultSkuId:e,sku:this.productData.skus.find((t=>{let{identifier:o}=t;return o===e}))}},hasSizes(){return!r()(this.productComputed)&&(Object(n.h)({product:this.productComputed,currentSku:this.productComputed.sku})||[]).length>1},personalizations(){return[{identifier:this.sku.identifier,options:this.sku.hsOptions}]},currentSkuAvailability(){return(this.$store.state.skuAvailability||{})[this.sku.identifier]||{}},skuToPurchase(){return this.wishlistMode&&this.sku.hsOptions?this.sku:this.productComputed.sku},skuProductIdToPurchase(){return this.wishlistMode&&this.sku.hsOptions?this.sku.productId:this.productComputed.identifier||""}},async beforeMount(){r()(this.product)&&!r()(this.sku)?(this.isLoading=!0,await this.getProduct({skuId:this.sku.identifier,productId:this.sku.productId}),this.isLoading=!1):(this.productData=this.product,this.selectedSku={productId:this.product.identifier,skuId:this.sku.identifier}),r()(this.currentSkuAvailability)&&this.updateSkuAvailability()},methods:{addToCart(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$emit("add-to-cart"),this.addToCartModalStandalone?this.initiateAddToCartModal(t,e):this.$emit("add",this.productComputed.sku,t,e),this.$emit("closed",!0)},async initiateAddToCartModal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o={sku:{...this.productComputed.sku,...this.sku.persoOptions&&{persoOptions:this.sku.hsOptions},...this.sku.persoDetails&&{persoDetails:this.sku.persoDetails}},errorMessage:t,errorCode:e,triggerElement:this.$refs.button},d=await window.LV.mountComponent("ProductAddToCartModal","#lv-public-modal-target",o);this.$store.commit(f.SET_IS_MODAL_OPEN,!0),d.$on("close-modal",(()=>{d.$destroy(),this.$store.commit(f.SET_IS_MODAL_OPEN,!1),this.$emit("add-to-cart-closed")}))},async getProduct(t){let{skuId:e,productId:o}=t;try{const{product:t,sizeGuide:d}=await this.$domain.catalog.getProduct({productId:o,isExclusive:!1,currentSkuId:e,isPerso:!1});this.productData={...t,sizeGuide:d},this.selectedSku={productId:o,skuId:e}}catch(t){this.$logger.error("Error while fetching product: ".concat(o),t),this.productData=null}},async updateSkuAvailability(){this.skuAvailabilityLoading=!0,await this.$store.dispatch(v.SKU_AVAILABILITY_REFRESH_ACTION,{productId:this.sku.productId,skuIds:this.sku.identifier}),this.skuAvailabilityLoading=!1},handleSizeChanged(t){const{identifier:e}=this.productData;this.selectedSku={skuId:t.identifier,productId:e},this.$emit("size-changed",t),this.isQubit&&this.trackAction(this.productData,"select_size")},trackAction(t,e){const{sku:{identifier:o},qubitTrackingData:d}=t;this.$lvTrackingSendEvent(this.$lvTrackingGenerateData({actionType:"e-commerce_interaction",actionPosition:"product_area/qubit",actionGa:e,actionId:e,labelGa:o,...d}))},sendEventProductPurchaseReady(t){Object(l.a)({name:"product-purchase-modal-ready",detail:{product:this.productComputed,purchaseId:t}})},openPersonalization(){return this.$router.push({path:this.productComputed.url})}}},k=m,_=(o(1300),o(0)),component=Object(_.a)(k,(function(){var t=this,e=t._self._c;return e("Modal",{attrs:{type:t.$modalTypes.SIDE_PANEL,"modal-class":"lv-product-card-purchase-modal","close-on-route-change":!1},on:{closed:function(e){return t.$emit("closed")}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n    "+t._s(t.isPdpLayout?t.$t("product_page_size"):t.$t("mywishlist_add_to_bag")))]},proxy:!0},{key:"default",fn:function(){return[t.isLoading?e("Loader",{staticClass:"lv-product-card-purchase-modal__loader"}):t._e(),t._v(" "),t.isPdpLayout?t._e():e("div",[e("ProductCard",{attrs:{sku:t.productComputed.sku,"media-widths":{xs:"half",l:"quarter"},"layout-type":"horizontal","display-identifier":""},on:{"sku-clicked":function(e){return t.$emit("panel-card-clicked")}}},[e("template",{slot:"category-link"},[e("a",{staticClass:"lv-product-card-purchase-modal__details list-label-s"},[t._v(t._s(t.$t("global_view_details")))])])],2)],1),t._v(" "),t.hasSizes&&!t.sku.hsOptions?e("SizeSelector",t._g({staticClass:"lv-product-card-purchase-modal__size-container",attrs:{product:t.productComputed,"emit-size-guide-event":t.emitSizeGuideEvent,"pdp-layout":t.isPdpLayout},on:{"sku-changed":t.handleSizeChanged}},t.$listeners)):t._e(),t._v(" "),t.sku.hsOptions?e("ProductPersonalizationButton",{staticClass:"lv-product-card-purchase-modal__personalization-container",attrs:{"personalization-options":t.sku.persoDetails,"current-sku":t.sku,cta:t.$t("sidepanel_personalization_modify"),"with-image":!1,"has-title":!0,"personalization-data":t.personalizations},on:{"open-personalization":t.openPersonalization}}):t._e()]},proxy:!0},{key:"footer",fn:function(){return[t.isLoading?t._e():e("ProductPurchase",{ref:"button",attrs:{sku:t.skuToPurchase,"product-id":t.skuProductIdToPurchase,"is-modal-view":!0,"perso-options":t.sku.persoDetails?t.sku.hsOptions:null,"perso-details":t.sku.persoDetails||null,"add-to-cart-tracking":t.productComputed.qubitTrackingData||t.addToCartTracking},on:{add:t.addToCart,"customize-add-to-cart-ready":t.sendEventProductPurchaseReady}})]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports},1133:function(t,e,o){var content=o(1301);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(9).default)("3400f9e1",content,!0,{sourceMap:!1})},1300:function(t,e,o){"use strict";o(1133)},1301:function(t,e,o){var d=o(8)((function(i){return i[1]}));d.push([t.i,'@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}@keyframes spinner{0%{stroke-dashoffset:132;transform:rotate(-90deg)}50%{stroke-dashoffset:28;transform:rotate(270deg)}to{stroke-dashoffset:132;transform:rotate(630deg)}}[dir] div+.lv-product-card-purchase-modal__size-container{border-top:1px solid #e1e1e1;margin-top:2rem;padding-top:2rem}.lv-product-card-purchase-modal__details{display:block;-webkit-text-decoration:underline;text-decoration:underline}[dir] .lv-product-card-purchase-modal__details{padding:.5rem 0 0}[dir] div+.lv-product-card-purchase-modal__personalization-container{margin-top:2rem;padding-top:2rem}[dir] .lv-product-card-purchase-modal .lv-product-purchase__button,[dir] .lv-product-card-purchase-modal .lv-product-purchase__express-action{margin-bottom:0}.lv-product-card-purchase-modal .lv-product-card__media{display:block;overflow:hidden;position:relative}.lv-product-card-purchase-modal .lv-product-card__media:before{content:"";display:block;width:100%}[dir] .lv-product-card-purchase-modal .lv-product-card__media:before{padding-top:125%}.lv-product-card-purchase-modal .lv-product-card__media>:not(button):not(.lv-loader):not(.lv-nosized){position:absolute;top:0;width:100%}[dir] .lv-product-card-purchase-modal .lv-product-card__media>:not(button):not(.lv-loader):not(.lv-nosized){left:0;right:0}.lv-product-card-purchase-modal .lv-product-card__media>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{top:50%}[dir] .lv-product-card-purchase-modal .lv-product-card__media>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{transform:translateY(-50%)}',""]),d.locals={},t.exports=d},1560:function(t,e,o){var content=o(2178);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(9).default)("a5377d98",content,!0,{sourceMap:!1})},1561:function(t,e,o){var content=o(2180);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(9).default)("acf7d192",content,!0,{sourceMap:!1})},2177:function(t,e,o){"use strict";o(1560)},2178:function(t,e,o){var d=o(8)((function(i){return i[1]}));d.push([t.i,"@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}@keyframes spinner{0%{stroke-dashoffset:132;transform:rotate(-90deg)}50%{stroke-dashoffset:28;transform:rotate(270deg)}to{stroke-dashoffset:132;transform:rotate(630deg)}}.lv-expandable-button.lv-button{overflow:hidden}[dir] .lv-expandable-button.lv-button{padding:.625rem}.lv-expandable-button.lv-button .lv-icon{fill:#000;height:.75rem;width:.75rem}.lv-expandable-button.lv-button .lv-expandable-button__label{display:none}[dir] .lv-expandable-button.lv-button,[dir] .lv-expandable-button.lv-button .lv-expandable-button__label,[dir] .lv-expandable-button.lv-button .lv-icon{transition:.3s cubic-bezier(.39,.575,.565,1)}.lv-expandable-button.lv-button:disabled,.lv-expandable-button.lv-button[disabled]{color:#767676}[dir] .lv-expandable-button.lv-button:disabled,[dir] .lv-expandable-button.lv-button[disabled]{background-color:#e1e1e1;border-color:#e1e1e1}@media(-moz-touch-enabled:0),(-webkit-hover:hover),(hover:hover)and (pointer:fine){.lv-expandable-button.lv-button:hover{width:auto}}.lv-expandable-button.lv-button:focus{width:auto}@media screen and (min-width:48rem){.lv-expandable-button.lv-button{height:.75rem;justify-content:flex-start;width:.75rem}[dir] .lv-expandable-button.lv-button:not(:disabled):hover{background:#fff;box-shadow:none}.lv-expandable-button.lv-button .lv-icon{flex:0 0 auto;height:.75rem;width:.75rem}.lv-expandable-button.lv-button .lv-expandable-button__label{display:block;opacity:0;white-space:nowrap}[dir=ltr] .lv-expandable-button.lv-button .lv-expandable-button__label{padding:0 0 0 .5rem}[dir=rtl] .lv-expandable-button.lv-button .lv-expandable-button__label{padding:0 .5rem 0 0}}@media screen and (min-width:48rem)and (-moz-touch-enabled:0),screen and (min-width:48rem)and (-webkit-hover:hover),screen and (min-width:48rem)and (hover:hover)and (pointer:fine){.lv-expandable-button.lv-button:hover{width:var(--hover-width)}.lv-expandable-button.lv-button:hover .lv-expandable-button__label{opacity:1}}@media screen and (min-width:48rem){.lv-expandable-button.lv-button:focus{width:var(--hover-width)}.lv-expandable-button.lv-button:focus .lv-expandable-button__label{opacity:1}}",""]),d.locals={},t.exports=d},2179:function(t,e,o){"use strict";o(1561)},2180:function(t,e,o){var d=o(8)((function(i){return i[1]}));d.push([t.i,"@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-out{0%{opacity:1}to{opacity:0}}@keyframes spinner{0%{stroke-dashoffset:132;transform:rotate(-90deg)}50%{stroke-dashoffset:28;transform:rotate(270deg)}to{stroke-dashoffset:132;transform:rotate(630deg)}}.lv-product-card-add-to-cart{display:flex;flex-direction:column;height:100%;justify-content:space-between}.lv-product-card-add-to-cart .lv-product-card__info-wrapper{display:flex}[dir=ltr] .lv-product-card-add-to-cart .lv-product-card__info-wrapper{padding-right:1rem}[dir=rtl] .lv-product-card-add-to-cart .lv-product-card__info-wrapper{padding-left:1rem}@media(-moz-touch-enabled:0),(-webkit-hover:hover),(hover:hover)and (pointer:fine){.lv-product-card-add-to-cart .lv-product-card:hover .lv-expandable-button{width:var(--hover-width)}[dir] .lv-product-card-add-to-cart .lv-product-card:hover .lv-expandable-button{background:#fff}.lv-product-card-add-to-cart .lv-product-card:hover .lv-expandable-button .lv-expandable-button__label{opacity:1}}.lv-product-card-add-to-cart .lv-product-card:focus .lv-expandable-button{width:var(--hover-width)}[dir] .lv-product-card-add-to-cart .lv-product-card:focus .lv-expandable-button{background:#fff}.lv-product-card-add-to-cart .lv-product-card:focus .lv-expandable-button .lv-expandable-button__label{opacity:1}",""]),d.locals={},t.exports=d},982:function(t,e,o){"use strict";o.r(e);var d=o(13),r=o.n(d),l=o(286),n=o(70),c=o(11),h=o(15),v={components:{Icon:c.default},props:{iconName:{type:String,required:!0},label:{type:String,required:!0}},computed:{isSmall(){return this.$store.getters[h.MEDIA_QUERIES_IS_EQUAL_OR_SMALLER_THAN]("s")}},watch:{isSmall(){this.setButtonStyle()}},updated(){this.setButtonStyle()},methods:{setButtonStyle(){if(this.isSmall)return this.$el.style.setProperty("--hover-width","auto");const t=this.$refs.buttonLabel.getBoundingClientRect().width+12;this.$el.style.setProperty("--hover-width","".concat(t/16,"rem"))}}},f=(o(2177),o(0)),m=Object(f.a)(v,(function(){var t=this,e=t._self._c;return e("button",t._g({staticClass:"lv-expandable-button lv-button -secondary -only-icon"},t.$listeners),[e("Icon",{attrs:{name:t.iconName}}),t._v(" "),e("span",{ref:"buttonLabel",staticClass:"lv-expandable-button__label body-s"},[t._v(t._s(t.label))])],1)}),[],!1,null,null,null).exports,k=o(1082),_=o(265),y={components:{ProductCard:n.default,ExpandableButton:m,ProductCardPurchaseModal:k.default,ProductAddToCartModal:_.default},mixins:[l.a],props:{item:{type:Object,default:()=>{}},sku:{type:Object,default:()=>{}},isQubit:{type:Boolean,default:!1},addToCartTracking:{type:Object,default:null},emitSizeGuideEvent:{type:Boolean,default:!1},layoutType:{type:String,default:null},wishlistMode:{type:Boolean,default:!1},inStock:{type:Boolean,default:!0},productId:{type:String,default:""}},data:()=>({product:null,selectedSku:null,currentSku:null,modalTrigger:null,isModalOpen:!1,skuAvailabilityLoading:!1}),computed:{productComputed(){var t,e;if(!this.product)return{};const o=(null===(t=this.selectedSku)||void 0===t?void 0:t.skuId)||(null===(e=this.item)||void 0===e?void 0:e.skuId);return{...this.product,defaultSkuId:o,sku:this.product.skus.find((t=>{let{identifier:e}=t;return e===o}))}},labelName(){return this.wishlistMode?this.inStock?this.$t("global_shop"):this.$t("mylv_wishlist_unavailable"):this.$t("global_shop")},isAddToCartAllowed(){return!this.wishlistMode||this.sku.size||this.sku.persoOptions}},watch:{item(){if(this.isQubit&&!r()(this.item)){const{skuId:t,productId:e}=this.item;this.getProduct({skuId:t,productId:e})}}},beforeMount(){if(this.isQubit&&!r()(this.item)){const{skuId:t,productId:e}=this.item;this.getProduct({skuId:t,productId:e})}},methods:{async getProduct(t){let{skuId:e,productId:o}=t;try{const{product:t,sizeGuide:d}=await this.$domain.catalog.getProduct({productId:o,isExclusive:!1,currentSkuId:e,isPerso:!1});this.product={...t,sizeGuide:d,...!!this.qubitTrackingData&&{qubitTrackingData:this.qubitTrackingData}},this.selectedSku={productId:o,skuId:e}}catch(t){this.$logger.error("Error while fetching product: ".concat(o),t),this.product=null}},async handleAddToCart(t){this.isAddToCartAllowed?(this.isModalOpen=!0,this.$emit("quick-add-to-bag")):(await this.addToCart(t),this.$emit("add",this.errorMessage,this.errorCode))},handlePanelCardClicked(){this.$emit("panel-card-clicked"),this.onClose()},onClose(){this.isModalOpen=!1,this.$emit("purchase-modal-closed")},handleAddToCartModalClose(){this.skuAddedToCart=null,this.errorMessage=null,this.errorCode=null}}},C=(o(2179),Object(f.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"lv-product-card-add-to-cart"},[e("ProductCard",t._b({attrs:{sku:t.isQubit?t.productComputed.sku:t.sku,"layout-type":t.layoutType,"markup-title":"div",fit:"cover"},on:{"sku-clicked":function(e){return t.$emit("sku-clicked")}},scopedSlots:t._u([{key:"feature",fn:function(){return[t._t("feature")]},proxy:!0},"horizontal"===t.layoutType?{key:"category-link",fn:function(){return[e("button",{staticClass:"lv-product-card-purchase-modal__details list-label-s",on:{click:function(e){return e.stopPropagation(),t.handleAddToCart.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("global_add_to_cart"))+"\n      ")])]},proxy:!0}:{key:"add-to-cart",fn:function(){return[e("ExpandableButton",{staticClass:"lv-product-card-add-to-cart__icon",attrs:{"icon-name":"navigation-cart",label:t.labelName,disabled:!t.inStock},on:{click:function(e){return e.stopPropagation(),t.handleAddToCart.apply(null,arguments)}}})]},proxy:!0}],null,!0)},"ProductCard",t.$attrs,!1)),t._v(" "),t.isModalOpen?e("ProductCardPurchaseModal",{attrs:{sku:t.isQubit?t.productComputed.sku:t.sku,"add-to-cart-modal-standalone":!0,"is-qubit":t.isQubit,product:t.productComputed,"emit-size-guide-event":t.emitSizeGuideEvent,"add-to-cart-tracking":t.addToCartTracking,"wishlist-mode":t.wishlistMode,"modal-layout":"cross-sell"},on:{closed:t.onClose,"panel-card-clicked":t.handlePanelCardClicked,"size-changed":e=>t.$emit("size-changed",e)}}):t._e(),t._v(" "),(t.skuAddedToCart||t.errorMessage)&&t.wishlistMode?e("ProductAddToCartModal",{attrs:{"error-message":t.errorMessage,"error-code":t.errorCode,sku:t.skuAddedToCart,"modal-trigger":t.modalTrigger},on:{"close-modal":t.handleAddToCartModalClose}}):t._e()],1)}),[],!1,null,null,null));e.default=C.exports}}]);